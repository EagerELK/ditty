.row
  .col-md-12
    = haml :'partials/search'
    %table.table.table-striped.table-bordered.table-hover
      %thead.thead-dark
        %tr
          %th User
          %th Action
          %th Details
          %th IP Address
          %th Browser
          %th Device
          %th Platform
          %th Created at
      %tbody
        - if list.count > 0
          - list.all.each do |entity|
            %tr
              %td
                -if entity.user
                  %a{ href: "#{settings.map_path}/users/#{entity.user.id}" }= entity.user.email
                -else
                  None
              %td= entity.action
              %td= entity.details
              %td= entity.ip_address || 'Unknown'
              %td= entity.browser || 'Unknown'
              %td= entity.device || 'Unknown'
              %td= entity.platform || 'Unknown'
              %td= entity.created_at&.strftime('%Y-%m-%d %H:%M:%S') || 'Unknown'
        - else
          %tr
            %td.text-center{ colspan: 4 } No records

- if list.count > 0
  = pagination(list, base_path)
